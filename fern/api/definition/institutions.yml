# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

service:
  auth: true
  base-path: ""
  endpoints:
    lookUpInstitutionByLocator:
      path: /institutionByLocator
      method: GET
      docs: >-
        Look up a financial institution by their country code and either
        [American Bankers Association routing
        number](https://www.aba.com/about-us/routing-number), by [International
        Bank Account Number (IBAN)](https://www.ecbs.org/iban.htm), or by [SWIFT
        Business Identifier Code (BIC)
        code](https://www.swift.com/standards/data-standards/bic-business-identifier-code).
        Optionally, include a list of intermediary institutions that may be
        necessary to complete international wire transfers.
      display-name: Look up institution by routing number, IBAN, or SWIFT/BIC code
      request:
        name: lookUpInstitutionByLocatorRequest
        query-parameters:
          locator:
            docs: >-
              The financial institution lookup key (routing number, IBAN, or
              SWIFT/BIC), as indicated by the `locatorType` query parameter.
            type: string
          locatorType:
            docs: Indicates what type of value the `locator` query parameter is.
            type: institutionLocatorType
          countryCode:
            docs: >-
              The country code in which to search for institutions. For the US,
              the `locatorType` must be `abaRoutingNumber`. For non-US
              countries, the `locatorType` must be `swiftBicCode` or
              `ibanAccountNumber`.
            type: string
          includeIntermediaryInstitutions:
            docs: >-
              If looking up a beneficiary institution for a wire transfer
              beneficiary institution, request the response also include a list
              of intermediary institutions.
            type: optional<boolean>
      response: institutionLookupResult
      errors: 
        - commons.Unauthorized
        - commons.Forbidden
        - commons.UnprocessableEntity

    listTransferSchedule:
      path: /institutions/{institutionId}/transferSchedule
      method: GET
      docs: Return a transfer schedule list for this institution.
      display-name: Return this institution's list of upcoming transfer schedule dates
      path-parameters:
        institutionId:
          docs: The unique identifier of a financial institution.
          type: string
      request:
        name: listTransferScheduleRequest
        query-parameters:
          startsOn:
            docs: >-
              The date to use to begin calculations of the transfer schedule in
              `YYYY-MM-DD` [RFC 3339](https://tools.ietf.org/html/rfc3339) date
              format.
            type: string
          endsOn:
            docs: >-
              The date to use to conclude calculations of the transfer schedule
              in `YYYY-MM-DD` [RFC 3339](https://tools.ietf.org/html/rfc3339)
              date format.
            type: optional<string>
          direction:
            docs: >-
              The direction of the transfer from the institution to the customer
              used for adjusting transfer dates due to banking holidays. For
              `debit`, dates are adjusted to the next business day. For
              `credit`, dates are adjusted to the previous business day.
            type: transferScheduleDirection
          count:
            docs: >-
              The maximum amount of dates to calculate and include in the
              response. If an end date is provided, the total count may be lower
              than the requested count.
            type: optional<integer>
          frequency:
            docs: The interval at which the money movement recurs.
            type: commons.transferFrequency
      response: transferSchedules
      errors: 
        - commons.Unauthorized
        - commons.Forbidden
        - commons.NotFound
        - commons.UnprocessableEntity

    getCutoffTimes:
      path: /institutions/{institutionId}/cutoffTimes
      method: GET
      docs: >-
        Return daily cutoff times for different money movement processes at a
        financial institution. Money movement requests (account to account
        transfers, ACH, wire transfers, etc.) must be submitted before the
        cutoff time in order for the financial institution to begin processing
        the request that day. Some [cutoff time types](#schema-cutoffTimeType)
        may have multiple cutoff times per day.
        Cutoff times are very slowly changing data. This is a _conditional
        operation_ when the `If-None-Match` header is used. If the client has a
        `getCutoffTimes` response and the `ETag` returned from a previous call
        to this operation, this operation returns a 304 Not Modified when called
        again if the cutoff times have not changed.
      display-name: Return the financial institution's cutoff times for products
      path-parameters:
        institutionId:
          docs: The unique identifier of a financial institution.
          type: string
      request:
        name: getCutoffTimesRequest
        query-parameters:
          timeZoneId:
            docs: >-
              Identifies the time zone for formatting time values in the
              response. If omitted, time values are formatting in the local
              timezone of the financial institution.
            type: optional<string>
        headers:
          If-None-Match:
            docs: >-
              The entity tag that was returned in the `ETag` response header of
              a previous call. If the resource's current entity tag value
              matches this header value, the `GET` will return 304 (Not
              Modified) and no response body, else the current resource
              representation and updated `ETag` is returned.
            type: optional<string>
      response: cutoffTimes
      errors: 
        - commons.BadRequest
        - commons.Unauthorized
        - commons.Forbidden
        - commons.NotFound
        - commons.UnprocessableEntity

    getTransferDateRestrictions:
      path: /institutions/{institutionId}/transferDateRestrictions
      method: GET
      docs: >-
        Return the transfer date restrictions for a date range and transfer
        parameters. The result is a list of days and dates that the financial
        institution does not allow scheduling specific types of transfers.
        This information provides hints to clients, allowing bank customers to
        select transfer dates from a calendar picker. However, these dates are
        not strictly enforced; a transfer can still be scheduled to occur on
        restricted dates but the financial institution may shift the date when
        funds are drafted to account for holidays, closures, or to adjust based
        on the risk level of the funding account.
      display-name: Return the financial institution's transfer dates restrictions
      path-parameters:
        institutionId:
          docs: The unique identifier of a financial institution.
          type: string
      request:
        name: getTransferDateRestrictionsRequest
        query-parameters:
          startsOn:
            docs: >-
              The start of the range of dates to include in the response, in
              `YYYY-MM-DD` [RFC 3339](https://tools.ietf.org/html/rfc3339) date
              format. While start dates far in the future are allowed, bank
              holiday schedules are only available for a small number of years
              ahead. The default is the current date.
            type: optional<string>
          endsOn:
            docs: >-
              The end of the range of dates to include in the response. in
              `YYYY-MM-DD` [RFC 3339](https://tools.ietf.org/html/rfc3339) date
              format. The default is at least one year from the `startOn` date
              and is limited to a four year interval.
            type: optional<string>
          type:
            docs: >-
              Describes the type of transfer. This determines what business
              rules and adjustments to make to the date restrictions. Note ACH
              transfers (including CTX and PPD), that `Credit` and `Debit` here
              are relative to the account at the _external_ financial
              institution.
            type: optional<transferTypeForDateRestrictions>
          risk:
            docs: >-
              The primary account's risk level. This determines what business
              rules and adjustments to make to the date restrictions. This
              parameter only applies to ACH credit transfers (funds credited to
              an external account) and is ignored for others.
            type: optional<achAccountRisk>
      response: transferDateRestrictions
      errors: 
        - commons.BadRequest
        - commons.Unauthorized
        - commons.Forbidden
        - commons.NotFound
        - commons.UnprocessableEntity

types:
  transferSchedules:
    docs: >-
      List of transfer methods. The items in the list are ordered in the `items`
      array.
    extends:
      - commons.abstractBody
    properties:
      items:
        docs: An array containing upcoming transfer schedule items.
        type: list<transferScheduleItem>

  transferScheduleDirection:
    docs: >+
      Provides the direction in which a transfer flows.
      <strong><code>transferScheduleDirection</code></strong> strings may have
      one of the following
      [enumerated
      values](https://dx.apiture.com/docs/api-documentation/concepts/label-groups#enumerations):
      <table>
      <tr>
        <th>Value</th><th>Description</th>
      </tr>
      <tr>
          <td><strong><code>debit</code></strong></td><td>Debit: <p>Money is transferred from a payer to the financial institution</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>credit</code></strong></td><td>Credit: <p>Money is transferred from the financial institution to a payee</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>both</code></strong></td><td>Both: <p>Money is transferred both to and from a payee/payer</p>
      </td>
          </tr>
      </table>
    enum:
      - debit
      - credit
      - both

  transferScheduleItem:
    docs: >-
      Summary representation of a transfer schedule resource in transfer
      schedule list.
    properties:
      scheduledOn:
        docs: >-
          The scheduled date of the calculated calendar recurrence in
          `YYYY-MM-DD` [RFC 3339](https://tools.ietf.org/html/rfc3339) date
          format.
        type: string
      effectiveOn:
        docs: >-
          The effective date of the recurrence in `YYYY-MM-DD` [RFC
          3339](https://tools.ietf.org/html/rfc3339) date format. When the
          effective date differs from the scheduled date, it is due to a banking
          holiday, weekend, or other non-business day. The date is adjusted to
          before the scheduled date when the transfer direction is `credit` and
          adjusted to after the scheduled date when the transfer direction is
          `debit`.
        type: string

  institutionId:
    docs: The unique immutable identifier of a financial institution.
    type: string

  cutoffTimes:
    docs: >-
      A representation of financial institution cutoff times for different money
      movement processes. A money movement process can have multiple cutoff
      times. The cutoff times are sorted in ascending chronological order by
      money movement process.
    extends:
      - commons.abstractBody
    properties:
      timeZoneId: timeZoneId
      items:
        docs: A list of cutoff times for a financial institution.
        type: list<cutoffTime>

  timeZoneId:
    docs: >-
      The identifier of a time zone, as described by [RFC
      7808](https://datatracker.ietf.org/doc/html/rfc7808.html#section-3.6).
      This value corresponds with the `tzid` value described in [RFC
      5545](https://datatracker.ietf.org/doc/html/rfc5545#section-3.2.19) and
      defined by the [IANA Time Zone Database](https://www.iana.org/time-zones).
    type: string

  cutoffTime:
    docs: >-
      A representation of a cutoff time for a money movement process at a
      financial institution.
    properties:
      type: cutoffTimeType
      time:
        docs: >-
          The cutoff time for a product formatted in [RFC
          3339](https://datatracker.ietf.org/doc/html/rfc3339) `time` format:
          `hh:mm`. The time is expressed in 24 hour time and is set to the local
          time zone of the financial institution.
        type: string

  cutoffTimeType:
    docs: >+
      Indicates the type of a cutoff time.
      <strong><code>cutoffTimeType</code></strong> strings may have one of the
      following
      [enumerated
      values](https://dx.apiture.com/docs/api-documentation/concepts/label-groups#enumerations):
      <table>
      <tr>
        <th>Value</th><th>Description</th>
      </tr>
      <tr>
          <td><strong><code>ach</code></strong></td><td>ACH</td>
          </tr>
      <tr>
          <td><strong><code>sameDayAch</code></strong></td><td>Same Day ACH</td>
          </tr>
      <tr>
          <td><strong><code>domesticWireTransfer</code></strong></td><td>Domestic Wire Transfer</td>
          </tr>
      <tr>
          <td><strong><code>internationalWireTransfer</code></strong></td><td>International Wire Transfer</td>
          </tr>
      <tr>
          <td><strong><code>internalTransfer</code></strong></td><td>Internal Account Transfer: <p>A transfer between accounts at the same financial institution</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>externalTransfer</code></strong></td><td>External Account Transfer: <p>A transfer to or from an account at an external financial institution</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>billPay</code></strong></td><td>Bill Pay</td>
          </tr>
      </table>
    enum:
      - ach
      - sameDayAch
      - domesticWireTransfer
      - internationalWireTransfer
      - internalTransfer
      - externalTransfer
      - billPay

  transferDateRestrictions:
    docs: >-
      A list of the financial institution's transfer date restrictions. This is
      a list of weekdays and specific dates when the institution cannot perform
      the requested transfers.
      The response may include dates prior to requested the start date, as that
      is useful for populating a calendar that shows the current month and the
      last few days of the previous month.
    extends:
      - commons.abstractBody
    properties:
      restrictedDates:
        docs: >-
          A list of restricted transfer dates as determined by the requested
          transfer parameters, holidays, and scheduled closures. This includes
          dates that correspond to normal day-of-week restrictions as listed in
          `restrictedDays`.
        type: optional<list<transferDateRestriction>>
      accuracyEndsOn:
        docs: >-
          The service only knows [bank
          holidays](https://www.federalreserve.gov/aboutthefed/k8.htm) for about
          two to four years in advance. This date is the end of that known
          holiday schedule, although the requested dates may extend well beyond
          this date. Any dates in the response beyond this date may omit
          holidays but may include other restricted dates based on the financial
          institution's normal scheduled closures such as Saturdays and Sundays.
        type: optional<string>

  transferTypeForDateRestrictions:
    docs: >+
      Indicates the type of transfer. This determines what business rules and
      adjustments to make to the date restrictions.
      <strong><code>transferTypeForDateRestrictions</code></strong> strings may
      have one of the following
      [enumerated
      values](https://dx.apiture.com/docs/api-documentation/concepts/label-groups#enumerations):
      <table>
      <tr>
        <th>Value</th><th>Description</th>
      </tr>
      <tr>
          <td><strong><code>internal</code></strong></td><td>Internal: <p>Internal account to internal account transfer</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>ach</code></strong></td><td>ACH: <p>An ACH transfer that includes both debit and credit transfers</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>achCredit</code></strong></td><td>ACH Credit: <p>An ACH transfer debiting an internal account and crediting an external account</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>achDebit</code></strong></td><td>ACH Debit: <p>An ACH transfer debiting an external account and crediting an internal account</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>domesticWireTransfer</code></strong></td><td>Domestic Wire Transfer</td>
          </tr>
      <tr>
          <td><strong><code>internationalWireTransfer</code></strong></td><td>International Wire Transfer</td>
          </tr>
      </table>
    enum:
      - internal
      - ach
      - achDebit
      - achCredit
      - domesticWireTransfer
      - internationalWireTransfer

  achAccountRisk:
    docs: >+
      Describes the risk level of a payment batch's settlement account.
      <strong><code>achAccountRisk</code></strong> strings may have one of the
      following
      [enumerated
      values](https://dx.apiture.com/docs/api-documentation/concepts/label-groups#enumerations):
      <table>
      <tr>
        <th>Value</th><th>Description</th>
      </tr>
      <tr>
          <td><strong><code>early</code></strong></td><td>Early: <p>The account is debited three business days before the ACH transfer&#39;s effective date. The account balance is also checked for sufficient funds before the account is debited. A risk limit may apply for commercial accounts with an <code>early</code> risk level.</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>normal</code></strong></td><td>Normal: <p>The account is debited two business days before the ACH transfer&#39;s effective date. The account balance is also checked for sufficient funds before the account is debited. A risk limit may apply for commercial accounts with a <code>normal</code> risk level.</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>float</code></strong></td><td>Float: <p>The account is debited on the ACH transfer&#39;s effective date. The account balance is not checked for sufficient funds before the account is debited. A risk limit applies for commercial accounts with a <code>float</code> risk level.</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>sameDay</code></strong></td><td>Same Day: <p>The account is credited on the ACH transfer&#39;s effective day. The account balance is not checked because <code>sameDay</code> is used for credit. A risk limit and per-transaction limit applies.</p>
      </td>
          </tr>
      </table>
    enum:
      - early
      - normal
      - float
      - sameDay

  transferDateRestriction:
    docs: >-
      A date where a transfer restriction occurs, and the `reason` it is
      restricted. If the `reason` is `holiday`, `closure` and the transfer is an
      ACH transfer, the object also contains either a `debitOn` or `creditOn`
      date or both.
    properties:
      occursOn:
        docs: >-
          The date that a transfers restriction occurs, is in the [ISO 8601
          Date](https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates) format,
          `yyyy-mm-dd`.
        type: string
      reason: transferDateRestrictionType
      creditOn:
        docs: >-
          The date the local financial institution account is credited in [RFC
          3339 `YYYY-MM-DD`](https://tools.ietf.org/html/rfc3339) date format.
          This is derived from the `date` based on the `risk` level. The
          credit-on date normally falls one business day after the restricted
          `date`. This property is only returned if the payment `type` is
          `achDebit` or `ach`.
        type: optional<string>
      debitOn:
        docs: >-
          The date the local financial institution account is debited in [RFC
          3339 `YYYY-MM-DD`](https://tools.ietf.org/html/rfc3339) date format.
          This is derived from the `date` based on the `risk` level and the
          transfer direction (`achDebit` or `achCredit`). The debit-on date
          normally falls one to three business days before the restricted
          `date`. This property is only returned if the payment `type` is
          `achCredit` or `ach`.
        type: optional<string>

  transferDateRestrictionType:
    docs: >+
      Indicates why a transfer date is restricted.
      <strong><code>transferDateRestrictionType</code></strong> strings may have
      one of the following
      [enumerated
      values](https://dx.apiture.com/docs/api-documentation/concepts/label-groups#enumerations):
      <table>
      <tr>
        <th>Value</th><th>Description</th>
      </tr>
      <tr>
          <td><strong><code>pastDate</code></strong></td><td>Past Date: <p>The transfer date is in the past</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>pastCutoffTime</code></strong></td><td>Past Cutoff Time: <p>Transfers disallowed because the current time is past the financial institutions&#39; cutoff time</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>riskRestricted</code></strong></td><td>Risk Restricted: <p>The date is restricted because the risk level requires one or more days for a debit to clear</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>holiday</code></strong></td><td>Holiday: <p>A <a href="https://www.federalreserve.gov/aboutthefed/k8.htm">Federal Reserve System observed holiday</a></p>
      </td>
          </tr>
      <tr>
          <td><strong><code>closure</code></strong></td><td>Closure: <p>Financial institution closure, such as a weekend or other planned closure</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>other</code></strong></td><td>Other: <p>Other</p>
      </td>
          </tr>
      </table>
    enum:
      - pastDate
      - pastCutoffTime
      - riskRestricted
      - holiday
      - closure
      - other

  institutionLookupResult:
    docs: Successful institution lookup result.
    extends:
      - commons.abstractBody
    properties:
      found:
        docs: >-
          `true` if a financial institution was found matching the requested FI
          locator, `false` if none was found.
        type: boolean
      institution: optional<simpleInstitution>
      intermediaryInstitutions:
        docs: >-
          Optional intermediary institutions, if requested and if intermediary
          institutions are required for for international wire transfers to the
          beneficiary institution. This array is omitted if there none are
          required.
        type: optional<list<simpleInstitution>>

  institutionLocatorType:
    docs: >+
      Indicates the type of the institution `locator`.
      <strong><code>institutionLocatorType</code></strong> strings may have one
      of the following
      [enumerated
      values](https://dx.apiture.com/docs/api-documentation/concepts/label-groups#enumerations):
      <table>
      <tr>
        <th>Value</th><th>Description</th>
      </tr>
      <tr>
          <td><strong><code>abaRoutingNumber</code></strong></td><td>ABA Routing Number: <p>The <a href="https://www.aba.com/about-us/routing-number">American Bankers Association routing number</a> of a financial institution</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>swiftBicCode</code></strong></td><td>swiftBicCode: <p>The <a href="https://www.swift.com/standards/data-standards/bic-business-identifier-code">SWIFT Business Identifier Code (BIC) code</a> of a financial institution</p>
      </td>
          </tr>
      <tr>
          <td><strong><code>ibanAccountNumber</code></strong></td><td>IBAN: <p><a href="https://www.ecbs.org/iban.htm">International Bank Account Number (IBAN)</a></p>
      </td>
          </tr>
      </table>
    enum:
      - abaRoutingNumber
      - swiftBicCode
      - ibanAccountNumber

  simpleInstitution:
    docs: A simple representation of a financial institution.
    properties:
      name:
        docs: The financial institution's name.
        type: string
      address: address
      locator:
        docs: >-
          The [American Bankers Association routing
          number](https://www.aba.com/about-us/routingnumber), [SWIFT Business
          Identifier Code (BIC)
          code](https://www.swift.com/standards/data-standards/bic-business-identifier-code),
          or [IBAN account number](https://www.ecbs.org/iban.htm) of the
          institution. The form of this institution locator string is set with
          the `locatorType` property.
        type: string
      locatorType: institutionLocatorType

  address:
    docs: >-
      A postal address that can hold a US address or an international (non-US)
      postal addresses.
    extends:
      - addressFields
    properties:
      regionName:
        docs: >-
          The state, district, or outlying area of the postal address. This is
          required if `countryCode` is not `US`. `regionCode` and `regionName`
          are mutually exclusive.
        type: optional<string>
      regionCode:
        docs: >-
          The state, district, or outlying area of the postal address. This is
          required if `countryCode` is `US` `regionCode` and `regionName` are
          mutually exclusive.
        type: optional<string>
      postalCode:
        docs: >-
          The postal code, which varies in format by country. If `countryCode`
          is `US`, this should be a five digit US ZIP code or ten character
          ZIP+4.
        type: string

  addressFields:
    docs: Properties of a simple address, used to compose other addresses.
    properties:
      address1:
        docs: >-
          The first line of the postal address. In the US, this typically
          includes the building number and street name.
        type: string
      address2:
        docs: >-
          The second line of the street address. This should only be used if it
          has a value. Typical values include building numbers, suite numbers,
          and other identifying information beyond the first line of the postal
          address.
        type: optional<string>
      locality:
        docs: The city/town/municipality of the address.
        type: string
      countryCode:
        docs: >-
          The [ISO-3611 alpha-2](https://www.iso.org/glossary-for-iso-3166.html)
          value for the country associated with the postal address.
        type: string
